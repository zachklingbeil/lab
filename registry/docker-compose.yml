services:
    registry:
        container_name: registry
        image: registry
        expose:
            - 5000
        volumes:
            - registry:/registry
            - ./auth/:/auth
        networks:
            - timefactory
        environment:
            REGISTRY_AUTH: htpasswd
            REGISTRY_AUTH_HTPASSWD_REALM: Registry Realm
            REGISTRY_AUTH_HTPASSWD_PATH: /auth/htpasswd
            REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY: /registry
            REGISTRY_HTTP_SECRET: ${PASSWORD}
            REGISTRY_TRACING_ENABLED: false
        restart: always
        pull_policy: always

networks:
    timefactory:
        external: true
volumes:
    registry:
        external: true
